// SPDX-License-Identifier: (GPL-2.0+ OR MIT)
/*
 * Copyright 2021 Data Respons Solutions AB
 */

/dts-v1/;

#include "sdb8000.dts"

/ {
	model = "Data Respons Solutions VDT8010";

	reg_lcd_con: regulator-lcd-con {
		compatible = "regulator-fixed";
		pinctrl-names = "default";
		pinctrl-0 = <&pinctrl_reg_lcd_con>;
		regulator-name = "LCD_CON-VDD";
		regulator-min-microvolt = <3300000>;
		regulator-max-microvolt = <3300000>;
		gpio = <&gpio1 14 GPIO_ACTIVE_HIGH>;
		startup-delay-us = <30000>;
		enable-active-high;
	};

	reg_vled_bl: regulator-vled-bl {
		compatible = "regulator-fixed";
		pinctrl-names = "default";
		pinctrl-0 = <&pinctrl_reg_vled_bl>;
		regulator-name = "VLED_BL";
		regulator-min-microvolt = <12210000>;
		regulator-max-microvolt = <12210000>;
		gpio = <&gpio1 6 GPIO_ACTIVE_HIGH>;
		startup-delay-us = <200000>;
		enable-active-high;
	};

	backlight_j5: backlight-j5 {
		compatible = "pwm-backlight";
		pwms = <&pwm1 0 1000000>;
        brightness-levels = <	0 1 2 3 4 5 6 7 8 9 10 15 20 25
        						30 40 50 60 70 80 90 100 120 150
        					>;
		default-brightness-level = <23>;
		power-supply = <&reg_vled_bl>;
	};

	panel_lvds: m101gwwf {
		compatible = "panel-lvds";
		pinctrl-names = "default";
		pinctrl-0 = <&pinctrl_panel>;
		label = "m101gwwf";
		data-mapping = "vesa-24";
		width-mm = <217>;
		height-mm = <136>;
		power-supply = <&reg_lcd_con>;
		backlight = <&backlight_j5>;

		panel-timing {
			clock-frequency = <70000000>; // 70,0 ~ 76,6
			hactive = <1280>;
			vactive = <800>;
			hback-porch = <130>;
			hfront-porch = <12>;
			vback-porch = <13>;
			vfront-porch = <8>;
			hsync-len = <15>;
			vsync-len = <15>;
		};

		port {
			lvds_in: endpoint {
				remote-endpoint = <&lvds_out>;
			};
		};
	};
};

&lvds_bridge {
	ports {
		port@2 {
			reg = <2>;
			lvds_out: endpoint {
				remote-endpoint = <&lvds_in>;
			};
		};
	};
};

&mipi_dsi {
	status = "okay";
};

&lcdif {
	status = "okay";
};

&i2c2 {
	light-sensor@51 {
		compatible = "vishay,vcnl4200";
		reg = <0x51>;
		proximity-near-level = <220>;
	};
};

&i2c3 {
	status = "okay";

	touch: ili2511@41 {
    	compatible = "ilitek,ili251x";
		pinctrl-names = "default";
		pinctrl-0 = <&pinctrl_touch>;
    	reg = <0x41>;
    	interrupt-parent = <&gpio4>;
    	interrupts = <26 IRQ_TYPE_EDGE_FALLING>;
    	reset-gpios = <&gpio4 25 GPIO_ACTIVE_LOW>;
	};
};

&usdhc1 {
	status = "disabled";
};

&pwm1 {
	status = "okay";
};

&uart1 {
	status = "disabled";
};

&fec1 {
	status = "disabled";
};

&iomuxc {
	pinctrl_panel: panelgrp {
		fsl,pins = <
			MX8MM_IOMUXC_SAI5_MCLK_GPIO3_IO25	0x0 /* LCD_CON-RESET */
			MX8MM_IOMUXC_GPIO1_IO11_GPIO1_IO11	0x0 /* LCD_CON-STBY */
		>;
	};

	pinctrl_touch: touchgrp {
		fsl,pins = <
			MX8MM_IOMUXC_SAI2_TXD0_GPIO4_IO26	0x80 /* INT_TP */
			MX8MM_IOMUXC_SAI2_TXC_GPIO4_IO25	0x0 /* RST_TP */
		>;
	};

	pinctrl_reg_lcd_con: reglcdcongrp {
		fsl,pins = <
			MX8MM_IOMUXC_GPIO1_IO14_GPIO1_IO14	0x0 /* LCD_PWR_EN */
		>;
	};

	pinctrl_reg_vled_bl: regvledblgrp {
		fsl,pins = <
			MX8MM_IOMUXC_GPIO1_IO06_GPIO1_IO6 0x0 /* LCD_BK_EN-CPU */
		>;
	};
};

// SPDX-License-Identifier: (GPL-2.0+ OR MIT)
/*
 * Copyright 2021 Data Respons Solutions AB
 */

/dts-v1/;

#include "sdb8000.dts"

/ {
	model = "Data Respons Solutions SDB8000-XT70610A";

	reg_lcd_con: regulator-lcd-con {
		compatible = "regulator-fixed";
		pinctrl-names = "default";
		pinctrl-0 = <&pinctrl_reg_lcd_con>;
		regulator-name = "LCD_CON-VDD";
		regulator-min-microvolt = <3300000>;
		regulator-max-microvolt = <3300000>;
		gpio = <&gpio1 14 GPIO_ACTIVE_HIGH>;
		off-on-delay-us = <20000>;
		enable-active-high;
	};

	backlight_j7: backlight-j7 {
		compatible = "pwm-backlight";
		pwms = <&pwm1 0 1000000 0>;
        brightness-levels = <	0 1 2 3 4 5 6 7 8 9 10 15 20 25
        						30 40 50 60 70 80 90 100 120 150
        					>;
		default-brightness-level = <23>;
		status = "okay";
	};

	panel_lvds: xt70610a {
		compatible = "panel-lvds";
		label = "xt70610a";
		data-mapping = "jeida-24";
		width-mm = <154>;
		height-mm = <86>;
		reset-gpios = <&gpio3 25 GPIO_ACTIVE_HIGH>;
		enable-gpios = <&gpio1 11 GPIO_ACTIVE_HIGH>;
		power-supply = <&reg_lcd_con>;
		backlight = <&backlight_j7>;

		panel-timing {
			clock-frequency = <51200000>; // 40,8 ~ 67,2
			hactive = <1024>;
			vactive = <600>;
			hback-porch = <30>;
			hfront-porch = <30>;
			vback-porch = <10>;
			vfront-porch = <10>;
			hsync-len = <260>;
			vsync-len = <15>;
		};

		port {
			xt70618a_from_bridge: endpoint {
				remote-endpoint = <&bridge_to_xt70618a>;
			};
		};
	};
};

&lvds_bridge {
	ports {
		port@2 {
			reg = <2>;
			bridge_to_xt70618a: endpoint {
				remote-endpoint = <&xt70618a_from_bridge>;
			};
		};
	};
};

&i2c3 {
	touch: gt5688@14 {
    	compatible = "goodix,gt5688";
    	reg = <0x14>;
    	interrupt-parent = <&gpio4>;
    	interrupts = <26 IRQ_TYPE_NONE>;
    	irq-gpios = <&gpio4 26 GPIO_ACTIVE_LOW>;
    	reset-gpios = <&gpio4 25 GPIO_ACTIVE_HIGH>;
	};
};

&iomuxc {
	pinctrl-names = "default";
	pinctrl-0 = <&pinctrl_hog_1>;

	pinctrl_hog_1: hog1grp {
		fsl,pins = <
			// Used by panel
			MX8MM_IOMUXC_SAI5_MCLK_GPIO3_IO25	0x0 /* LCD_CON-RESET */
			MX8MM_IOMUXC_GPIO1_IO11_GPIO1_IO11	0x0 /* LCD_CON-STBY */
			MX8MM_IOMUXC_SAI2_TXD0_GPIO4_IO26	0x80 /* INT_TP */
			MX8MM_IOMUXC_SAI2_TXC_GPIO4_IO25	0x0 /* RST_TP */
		>;
	};

	pinctrl_reg_lcd_con: reglcdcongrp {
		fsl,pins = <
			MX8MM_IOMUXC_GPIO1_IO14_GPIO1_IO14	0x0 /* LCD_PWR_EN */
		>;
	};
};
